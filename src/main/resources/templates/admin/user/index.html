<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="/admin/layout">
    <head>
        <meta charset="UTF-8">
        <title>User List</title>
        <style>
            body {
                background-color: #f5f5f5;
                font-family: 'Arial', sans-serif;
                margin: 0;
                padding: 0;
            }

            .container-fluid {
                padding: 20px;
            }

            .white-box {
                background-color: #fff;
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }

            h3.box-title {
                color: #4CAF50;
            }

            .btn-primary {
                background-color: #4CAF50;
                border: none;
            }

            .btn-primary:hover {
                background-color: #45a049;
            }

            .btn-danger {
                background-color: #d9534f;
                border: none;
            }

            .btn-danger:hover {
                background-color: #c9302c;
            }

            table {
                width: 100%;
                margin-top: 20px;
            }

            table, th, td {
                border: 1px solid #ddd;
                border-collapse: collapse;
            }

            th, td {
                padding: 12px;
                text-align: left;
            }

            th {
                background-color: #f2f2f2;
            }

            .pagination {
                margin-top: 20px;
            }

            .pagination .page-item .page-link {
                color: #4CAF50;
            }

            .pagination .page-item.active .page-link {
                background-color: #4CAF50;
                border-color: #4CAF50;
            }
            /* Ẩn hàng khi có lớp hidden-row */
            .hidden-row {
                display: none;
            }
            /* Style for the modal */
            .modaldal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5); /* semi-transparent black overlay */
                z-index: 9999; /* ensure modal is on top of other content */
            }

            /* Style for the modal body */
            .modaldal_body {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: white;
                padding: 20px;
                border-radius: 5px;
            }

            /* Style for the modal overlay */
            .modaldal_overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.6); /* semi-transparent black overlay */
            }

            /* Show the modal when the dialog-btn is clicked */
            .dialog-btn:focus + .modaldal {
                display: block;
            }
            .search-form {
                display: flex;
                justify-content: flex-end;
                margin-bottom: 10px; /* Optional: Adjust margin as needed */
            }

            label {
                margin-right: 10px; /* Optional: Adjust margin as needed */
            }

            #searchName {
                margin-right: 10px; /* Optional: Adjust margin as needed */
            }

            .btn-primary {
                margin-left: 10px; /* Optional: Adjust margin as needed */
            }






        </style>

    </head>
    <body>
        <div layout:fragment="content">



            <!-- Button to trigger the modal -->

            <div class="content-wrapper" style="min-height: 1302.4px;">
                <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
                     data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
                    <div class="page-wrapper" style="min-height: 250px;">
                        <div class="container-fluid">


                            <!-- ============================================================== -->
                            <!-- Start Page Content -->
                            <!-- ============================================================== -->
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="white-box">
                                        <!-- Modal for creating a new user -->
                                        <a th:href="@{/admin/user/create}" class="btn btn-primary">Create New User</a>
                                        <form class="search-form" th:action="@{'/admin/servicedv/search'}" method="get">

                                            <label for="searchName"></label>
                                            <input type="text" id="searchName" name="name" placeholder="Search by Name" />

                                            <button class="btn btn-primary" type="submit">Search</button>
                                        </form>



                                        <h2 class="my-4">User List</h2>                                                                                                                   
                                        <table class="table table-bordered">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th>Username</th>

                                                    <th>Email</th>

                                                    <th>Role</th>
                                                    <th>Status</th>
                                                    <th>Acction</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="u : ${users}">
                                                    <td th:text="${u.username}"></td>

                                                    <td th:text="${u.email}"></td>
                                                    <td th:text="${u.roleInfo.role_name}"></td>
                                                    <td th:text="${u.status ? 'Active' : 'Inactive'}"></td>
                                                    <td>
                                                        <a th:href="@{'/admin/user/detailsById/' + ${u.id}}" class="btn btn-secondary">
                                                            <i  class="fa fa-eye"></i>
                                                        </a>
                                                        <a th:href="@{'/admin/user/edit/' + ${u.id}}" class="btn btn-info">
                                                            <i class="fa fa-pencil"></i> 
                                                        </a>


                                                    </td>

                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="clearfix">
                                            <ul class="pagination pagination-sm justify-content-end pull-right">
                                                <li th:if="${currentPage > 1}" class="page-item">
                                                    <a class="page-link" th:href="@{'?pageNo=' + ${currentPage - 1} }">Previous</a>
                                                </li>
                                                <li th:each="pageNum : ${pageNumbers}" th:class="${pageNum == currentPage ? 'page-item active' : 'page-item'}">
                                                    <a class="page-link" th:href="@{'?pageNo=' + ${pageNum}}" th:text="${pageNum}"></a>
                                                </li>
                                                <li th:if="${currentPage < totalPages}" class="page-item">
                                                    <a class="page-link" th:href="@{'?pageNo=' + ${currentPage + 1} }">Next</a>
                                                </li>
                                            </ul>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>








    </body>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Lắng nghe sự kiện click trên nút "Toggle"
            var toggleButtons = document.querySelectorAll('.toggle-btn');
            toggleButtons.forEach(function (button) {
                button.addEventListener('click', function () {
                    // Tìm hàng chứa nút được nhấn
                    var row = button.closest('.user-row');
                    // Kiểm tra trạng thái hiện tại của hàng
                    var isHidden = row.classList.contains('hidden-row');
                    // Thay đổi trạng thái của hàng
                    if (isHidden) {
                        row.classList.remove('hidden-row');
                    } else {
                        row.classList.add('hidden-row');
                    }
                });
            });
        });
    </script>





</html>
